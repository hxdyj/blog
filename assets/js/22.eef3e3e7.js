(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{568:function(a,s,e){"use strict";e.r(s);var t=e(42),n=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"宝塔-linux-启动-tomcat-jsvc-找不到-md"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#宝塔-linux-启动-tomcat-jsvc-找不到-md"}},[a._v("#")]),a._v(" 宝塔 linux 启动 tomcat jsvc 找不到.md")]),a._v(" "),e("h3",{attrs:{id:"_1-设置-java-home"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置-java-home"}},[a._v("#")]),a._v(" 1：设置 JAVA_HOME")]),a._v(" "),e("h4",{attrs:{id:"一-找到-java-安装目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一-找到-java-安装目录"}},[a._v("#")]),a._v(" （一）找到 JAVA 安装目录")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ls -l $(which java)\nwhich java\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("如果显示的是 "),e("code",[a._v("/usr/bin/java")]),a._v(" 请执行下面步骤")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ls -lr /usr/bin/java\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("输出应为："),e("code",[a._v("/usr/bin/java -> /etc/alternatives/java")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ls -lrt /etc/alternatives/java\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("输出："),e("code",[a._v("/etc/alternatives/java -> /usr/lib/jvm/java-11-openjdk-11.0.3.7-0.el7_6.aarch64/jre/bin/java")])]),a._v(" "),e("p",[a._v("上面的"),e("code",[a._v("/usr/lib/jvm/java-11-openjdk-11.0.3.7-0.el7_6.aarch64")]),a._v("就是 JAVA 的安装路径")]),a._v(" "),e("h4",{attrs:{id:"二-设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二-设置"}},[a._v("#")]),a._v(" （二）设置")]),a._v(" "),e("p",[a._v("1）：编辑环境变量的配置文件")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("vi /etc/profile\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("2）：在文件底部加入以下配置")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-11.0.3.7-0.el7_6.aarch64\nexport JRE_HOME=$JAVA_HOME/jre\nexport CLASSPATH=$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH\nexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("3）：刷新配置，使其生效")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("source /etc/profile\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("4）：测试配置结果")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("echo $JAVA_HOME\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("hr"),a._v(" "),e("h2",{attrs:{id:"centos7-中使用-jsvc-启动-tomcat-daemon-模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos7-中使用-jsvc-启动-tomcat-daemon-模式"}},[a._v("#")]),a._v(" CentOS7 中使用 jsvc 启动 tomcat(daemon 模式)")]),a._v(" "),e("blockquote",[e("p",[a._v("在生产中，tomcat 应该以 daemon 的模式运行，而且如果需要以普通用户的身份启动 tomcat，那么就不能使用 1024 以下的端口，这是 Liunx 系统的限制，只有 root 用户才能使用小于 1024 的端口。那么该如何将 tomcat 配置成服务呢？接下来，我们就来聊一聊 jsvc 这个东东。\njsvc 是什么，简单的讲，它就是一个 C 程序，是 tomcat 发行版中自带的一套代码，路径在 tomcat/bin/commons-daemon-native.tar.gz 中。有了 jsvc，我们就可以简单的定制 tomcat 的启动脚本使 tomcat 成为服务，指定 tomcat 运行时的用户和组，还可以定制一些 jvm 的参数等等，废话不多说，下面开始实战配置：")])]),a._v(" "),e("p",[a._v("###（一）安装 jsvc：\n进入 tomcat 下面的 bin 目录：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('//http://commons.apache.org/proper/commons-daemon/download_daemon.cgi下载地址\ntar xf commons-daemon-native.tar.gz\ncd commons-daemon-1.0.15-native-src/unix/\n./configure --with-java=$JAVA_HOME\n...\n*** All done ***\nNow you can issue "make"\n[root@tomcat unix]# make\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("p",[a._v("如果出错")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("//错误信息：linux  jni_md.h: No such file or directory\nfind / -name jni_md.h 2> /dev/null\nln -s /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el8_2.aarch64/include/linux/jni_md.h /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.262.b10-0.el8_2.aarch64/include/jni_md.h\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("p",[a._v("编译完成后，会在当前文件夹生成一个 jsvc 的文件，将它拷贝到 tomcat/bin/下,")]),a._v(" "),e("p",[a._v("bin 目录下有个 daemon.sh，这个是 tomcat 服务的启动脚本，宝塔 linux 已经存在于/etc/init.d/下,若不存在，创建文件")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("#!/bin/bash\n# chkconfig: 2345 55 25\n# description: tomcat Service\n\n### BEGIN INIT INFO\n# Provides:          tomcat\n# Required-Start:\n# Required-Stop:\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: starts tomcat\n# Description:       starts the tomcat\n### END INIT INFO\npath=/www/server/tomcat/bin\ncd $path\nbash daemon.sh $1\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br")])]),e("p",[a._v("添加服务：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("chkconfig --add tomcat\nchkconfig --list tomcat\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("启动服务：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("service tomcat start\nnetstat -tnlp\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("h3",{attrs:{id:"can-not-locale-java-home"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#can-not-locale-java-home"}},[a._v("#")]),a._v(" can not locale JAVA HOME")]),a._v(" "),e("p",[a._v("编辑 tomcat 目录下的 daemon.sh\n将 JAVA_HOME=部分的 jdk 换成上边环境变量的 jdk 路径")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('test ".$TOMCAT_USER" = . && TOMCAT_USER=www\n# Set JAVA_HOME to working JDK or JRE\nJAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.252.b09-2.el7_8.arm\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br")])]),e("p",[a._v("至此，宝塔 linux 就可以正常运行 tomcat 了")]),a._v(" "),e("h2",{attrs:{id:"ssh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[a._v("#")]),a._v(" ssh")]),a._v(" "),e("h3",{attrs:{id:"remote-host-identification-has-changed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remote-host-identification-has-changed"}},[a._v("#")]),a._v(" REMOTE HOST IDENTIFICATION HAS CHANGED")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ssh-keygen -R root@Ip // 重新ssh连接\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("ul",[e("li",[a._v("或者删除 .ssh/know_hosts 里 ip 相关的 key")])]),a._v(" "),e("h2",{attrs:{id:"redis-软件配置文件修改密码以后无法在宝塔-linux-面板操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-软件配置文件修改密码以后无法在宝塔-linux-面板操作"}},[a._v("#")]),a._v(" redis 软件配置文件修改密码以后无法在宝塔 linux 面板操作")]),a._v(" "),e("p",[a._v("ssh root 用户连接服务器以后，执行")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("pkill -9 redis\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("然后在宝塔 linux 面板进行重启就好了")])])}),[],!1,null,null,null);s.default=n.exports}}]);