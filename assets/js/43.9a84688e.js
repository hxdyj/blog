(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{591:function(s,n,a){"use strict";a.r(n);var e=a(42),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"npm-package-开发指南-包内容篇"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-package-开发指南-包内容篇"}},[s._v("#")]),s._v(" npm package 开发指南-包内容篇")]),s._v(" "),a("p",[s._v("假设我们要开发一个 npm 库，名字叫 lib-dev-tutorial，那么需要包含哪些内容？我们下面就来列举下，初始化目录结构如下:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lib-dev-tutorial\n  ├── src -- 源码目录\n  |    └── index.js\n  ├── .gitignore\n  └── package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"package-包含的内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#package-包含的内容"}},[s._v("#")]),s._v(" package 包含的内容")]),s._v(" "),a("p",[s._v("库的使用者使用的文件")]),s._v(" "),a("p",[s._v("如果开发人员安装了你的库，那么引入的时候找哪个文件？编译源码生成 dist/index.js，并在 package.json 中增加一个 main 字段指向这个文件。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lib-dev-tutorial\n  ├── dist\n  |    └── index.js\n  ├── src -- 源码目录\n  |    └── index.js\n  ├── .gitignore\n  └── package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "main": "dist/index.js"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("npm 始于 "),a("code",[s._v("node")]),s._v("，所以这个文件应该符合 "),a("code",[s._v("commonjs")]),s._v(" 的模块规范。")]),s._v(" "),a("h3",{attrs:{id:"符合-es-module-的文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#符合-es-module-的文件"}},[s._v("#")]),s._v(" 符合 "),a("code",[s._v("ES Module")]),s._v(" 的文件")]),s._v(" "),a("p",[s._v("现在支持运行原生 "),a("code",[s._v("ES Module")]),s._v(" 的环境在变多，如果开发人员使用 "),a("code",[s._v("ES Module")]),s._v(" 来编写程序。那么我们直接提供一个符合 "),a("code",[s._v("ES Module")]),s._v(" 规范的文件，就不需要再把上一步中 "),a("code",[s._v("commonjs")]),s._v(" 规范文件转成 "),a("code",[s._v("ES Module")]),s._v(" 了。通过编译工具编译出使用 "),a("code",[s._v("ES Module")]),s._v(" 规范的文件 "),a("code",[s._v("es/index.js")]),s._v("，并在 "),a("code",[s._v("package.json")]),s._v(" 中增加一个 "),a("code",[s._v("module")]),s._v(" 字段指向这个文件。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lib-dev-tutorial\n  ├── es\n  |    └── index.js\n  ├── dist\n  |    └── index.js\n  ├── src -- 源码目录\n  |    └── index.js\n  ├── .gitignore\n  └── package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("很多库为了把上述两步的文件语义化区分，会把 "),a("code",[s._v("dist")]),s._v(" 目录改成 "),a("code",[s._v("lib")]),s._v("，我们也遵循这个习惯：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lib-dev-tutorial\n  ├── es\n  |    └── index.js\n  ├── lib\n  |    └── index.js\n  ├── src -- 源码目录\n  |    └── index.js\n  ├── .gitignore\n  └── package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "main": "lib/index.js",\n  "module": "es/index.js"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"通过-script-引用的文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-script-引用的文件"}},[s._v("#")]),s._v(" 通过 "),a("code",[s._v("script")]),s._v(" 引用的文件")]),s._v(" "),a("p",[s._v("如果你希望自己的库健壮点，还可以提供 "),a("code",[s._v("umd 模式")]),s._v("的文件，让你的库可以直接在 html 上通过 script 标签引用。通过编译工具编译出文件 "),a("code",[s._v("umd/index.js")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lib-dev-tutorial\n  ├── umd\n  |    └── index.js\n  ├── es\n  |    └── index.js\n  ├── lib\n  |    └── index.js\n  ├── src -- 源码目录\n  |    └── index.js\n  ├── .gitignore\n  └── package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("code",[s._v("umd/index.js")]),s._v(" 要不要压缩按自己需求来决定。")]),s._v(" "),a("h3",{attrs:{id:"类型声明文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#类型声明文件"}},[s._v("#")]),s._v(" 类型声明文件")]),s._v(" "),a("p",[a("code",[s._v("TypeScript")]),s._v(" 的使用已经异常广泛了，我们也增加一个自己库的类型声明文件。方法有三种：")]),s._v(" "),a("p",[s._v("把类型声明文件放到某一个目录下（譬如："),a("code",[s._v("typings/index.d.ts")]),s._v("），并在 "),a("code",[s._v("package.json")]),s._v(" 中增加 types 字段指向这个文件。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lib-dev-tutorial\n  ├── umd\n  |    └── index.js\n  ├── es\n  |    └── index.js\n  ├── lib\n  |    └── index.js\n  ├── src -- 源码目录\n  |    └── index.js\n  ├── typings\n  |    └── index.d.ts\n  ├── .gitignore\n  └── package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "main": "lib/index.js",\n  "module": "es/index.js",\n  "types": "typings/index.d.ts"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("注："),a("code",[s._v("package.json")]),s._v(" 中字段 "),a("code",[s._v("types")]),s._v(" 也可以写成 "),a("code",[s._v("typings")]),s._v("，两者是等价的。")])]),s._v(" "),a("p",[s._v("在库的根目录下直接放一个 "),a("code",[s._v("index.d.ts")]),s._v("，这个文件原则上不需要在 "),a("code",[s._v("package.json")]),s._v(" 指定。但是推荐所有情况都在 "),a("code",[s._v("package.json")]),s._v(" 指明类型声明文件的位置。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lib-dev-tutorial\n  ├── umd\n  |    └── index.js\n  ├── es\n  |    └── index.js\n  ├── lib\n  |    └── index.js\n  ├── src -- 源码目录\n  |    └── index.js\n  ├── index.d.ts -- 原则上无需在 package.json 声明文件位置\n  |\n  ├── .gitignore\n  └── package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("单独编写类型声明文件，发布到 npm 上的 "),a("code",[s._v("@types organization")]),s._v(" 下 "),a("code",[s._v("@types/lib-dev-tutorial")]),s._v("，这种方式开发者需要单独安装类型声明文件 "),a("code",[s._v("npm install --save @types/lib-dev-tutorial")]),s._v("\n文档")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("READMD.md - 这个是作为你的库在 npm 网站上的主页。\nCHANGELOG.md\nLICENSE\nlib-dev-tutorial\n  ├── umd\n  |    └── index.js\n  ├── es\n  |    └── index.js\n  ├── lib\n  |    └── index.js\n  ├── src -- 源码目录\n  |    └── index.js\n  ├── typings\n  |    └── index.d.ts\n  |\n  ├── .gitignore\n  ├── package.json\n  ├── README.md\n  ├── CHANGELOG.md\n  └── LICENSE\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h3",{attrs:{id:"发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布"}},[s._v("#")]),s._v(" 发布")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("package.json字段\n以下是和发布到 npm 有密切关系的字段(但不仅限于这些字段)\n\nname：库的名字。\nversion：库的版本号，发布的时候读取的就是这个字段。\nauthor：库作者，会在 npm 网站库首页显示。\nlicense：开源证书，会在 npm 网站库首页显示。\nrepository：代码库地址，会在 npm 网站库首页显示。\nhomepage：库的主页地址，会在 npm 网站库首页显示。\ndependencies：你的库依赖的其他库，在开发者 install 你的库的时候会一并下载。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"scoped-库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scoped-库"}},[s._v("#")]),s._v(" scoped 库")]),s._v(" "),a("p",[s._v("如果你的库是公开库，则直接 "),a("code",[s._v("npm publish")]),s._v(" 就可以了（对了 publish 前记得 login 噢~）。")]),s._v(" "),a("p",[s._v("如果你的库名是 "),a("code",[s._v("@name/subname")]),s._v("，说明你的库是 "),a("code",[s._v("scoped")]),s._v("，那么你还要做这些事情：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("登录到 npm 网站，建立一个 @name 的组织：https://www.npmjs.com/org/create （填写 organization name 的时候 @ 符号不用填），付费还是公开按需自己的需要。首次发布，如果不先建立，是发不上去的，会报 Scope not found。")])]),s._v(" "),a("li",[a("p",[s._v("如果你的库名是 "),a("code",[s._v("@name/subname")]),s._v("，且按公开库发布，在运行 npm 发布命令时要加参数："),a("code",[s._v("npm publis --access public")])])]),s._v(" "),a("li",[a("p",[s._v("第二步中如果不加参数，请在 "),a("code",[s._v("package.json")]),s._v(" 中加上如下字段：")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n      "publishConfig": {\n        "access": "public"\n      }\n }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("和 package 无关\n最后稍微说下你会在代码库中还会包含点什么文件。")]),s._v(" "),a("h4",{attrs:{id:"持续集成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持续集成"}},[s._v("#")]),s._v(" 持续集成")]),s._v(" "),a("p",[s._v("使用持续集成服务，譬如 "),a("code",[s._v("travis")]),s._v("，你会有配置文件 "),a("code",[s._v(".travis.yml")])]),s._v(" "),a("h4",{attrs:{id:"github"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github"}},[s._v("#")]),s._v(" github")]),s._v(" "),a("p",[s._v("会有 "),a("code",[s._v(".github")]),s._v(" 文件夹，下面会有些访问 "),a("code",[s._v("github")]),s._v(" 如何展示 "),a("code",[s._v("issue")]),s._v(" 等页面的配置文件。")]),s._v(" "),a("h4",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),a("p",[s._v("各种 "),a("code",[s._v("ignore")]),s._v(" 文件，各种工程化配置文件。各种 "),a("code",[s._v("demo/example")]),s._v("，各种测试相关文件，等等等等。")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"npm-安装-发布-更新-撤销发布包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-安装-发布-更新-撤销发布包"}},[s._v("#")]),s._v(" npm 安装 发布/更新/撤销发布包")]),s._v(" "),a("p",[s._v("发布包之前你首先要有一个 npm 的账号")]),s._v(" "),a("p",[s._v("第一次发布包：\n在终端输入 "),a("code",[s._v("npm adduser")]),s._v("，提示输入账号，密码和邮箱，然后将提示创建成功")]),s._v(" "),a("p",[s._v("非第一次发布包：\n在终端输入 "),a("code",[s._v("npm login")]),s._v("，然后输入你创建的账号和密码，和邮箱，登陆")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("npm adduser")]),s._v(" 成功的时候默认你已经登陆了，所以不需要再接着 "),a("code",[s._v("npm login")]),s._v(".")]),s._v(" "),a("li",[s._v("不能和已有的包的名字重名！")]),s._v(" "),a("li",[s._v("还有一点要注意的是 npm 对包名的限制：不能有大写字母/空格/下滑线!")]),s._v(" "),a("li",[s._v("你的项目里有部分私密的代码不想发布到 npm 上？\n将它写入"),a("code",[s._v(".gitignore")]),s._v(" 或"),a("code",[s._v(".npmignore")]),s._v(" 中，上传就会被忽略了")])])]),s._v(" "),a("h3",{attrs:{id:"撤销发布包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#撤销发布包"}},[s._v("#")]),s._v(" 撤销发布包")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" unpblish "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --force\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("没有 xxx 默认撤销这个版本")])]),s._v(" "),a("ol",[a("li",[s._v("根据规范，只有在发包的 24 小时内才允许撤销发布的包（ unpublish is only allowed with versions published in the last 24 hours）")]),s._v(" "),a("li",[s._v("即使你撤销了发布的包，发包的时候也不能再和被撤销的包的名称和版本重复了（即不能名称相同，版本相同，因为这两者构成的唯一标识已经被“占用”了）")])]),s._v(" "),a("h3",{attrs:{id:"npm-更新发布后的包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-更新发布后的包"}},[s._v("#")]),s._v(" npm 更新发布后的包：")]),s._v(" "),a("p",[s._v("事实上 npm 更新包和发布包的命令是一样的，都是 npm publish,不同之处在于，你需要修改包的版本")]),s._v(" "),a("p",[s._v("所以步骤是：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("修改包的版本（package.json 里的 version 字段）")])]),s._v(" "),a("li",[a("p",[s._v("npm publish")])])]),s._v(" "),a("h3",{attrs:{id:"修改版本的细节"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改版本的细节"}},[s._v("#")]),s._v(" 修改版本的细节：")]),s._v(" "),a("p",[s._v("npm 有一套自己的版本控制标准——Semantic versioning（语义化版本）")]),s._v(" "),a("p",[s._v("在我们的"),a("code",[s._v("package.json")]),s._v("里面有一个 "),a("code",[s._v("version")]),s._v("字段。那么，怎么在项目不断构建的过程中调整版本呢？")]),s._v(" "),a("p",[s._v("具体体现为：")]),s._v(" "),a("p",[a("strong",[s._v("对于 "),a("code",[s._v("version:x.y.z")])])]),s._v(" "),a("ol",[a("li",[s._v("修复 bug,小改动，增加 z")]),s._v(" "),a("li",[s._v("增加了新特性，但仍能向后兼容，增加 y")]),s._v(" "),a("li",[s._v("有很大的改动，无法向后兼容,增加 x")])]),s._v(" "),a("p",[s._v("例如：我原本的项目是 "),a("code",[s._v("1.0.0")]),s._v(" 版本的话")]),s._v(" "),a("p",[s._v("若是 1 中情况，变为 "),a("code",[s._v("1.0.1")])]),s._v(" "),a("p",[s._v("若是 2 中情况，变为 "),a("code",[s._v("1.1.0")])]),s._v(" "),a("p",[s._v("若是 3 中情况，变为 "),a("code",[s._v("2.0.0")])]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("npm version <update_type>")]),s._v("自动改变版本")]),s._v(" "),a("p",[a("code",[s._v("update_type")]),s._v(" 为 "),a("code",[s._v("patch")]),s._v(", "),a("code",[s._v("minor")]),s._v(", or "),a("code",[s._v("major")]),s._v(" 其中之一，分别表示补丁，小改，大改")])])}),[],!1,null,null,null);n.default=t.exports}}]);