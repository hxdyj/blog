(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{589:function(e,s,t){"use strict";t.r(s);var a=t(42),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"搜索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搜索"}},[e._v("#")]),e._v(" 搜索")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("命令")]),e._v(" "),t("th",[e._v("作用")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("code",[e._v("find .xargs")]),e._v(" ¦ "),t("code",[e._v('grep -ri "strname"')])]),e._v(" "),t("td",[e._v("搜索当前目录所有文件是否包含某个字符串")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("netstat -tlnp")])]),e._v(" "),t("td",[e._v("查看端口")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("ln -s a/b /usr/local/bin")])]),e._v(" "),t("td",[e._v("添加 b 命令到环境变量")])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("sudo passwd [ username ]")])]),e._v(" "),t("td",[e._v("修改 root 和普通用户密码")])])])]),e._v(" "),t("p",[t("a",{attrs:{href:"http://www.cnblogs.com/mengyan/archive/2012/09/04/2669894.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("环境变量详解"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"vim"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vim"}},[e._v("#")]),e._v(" Vim")]),e._v(" "),t("ul",[t("li",[e._v("强制保存")])]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(":w !sudo tee %\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h2",{attrs:{id:"linux-守护进程-daemon【node-可用-pm2-框架】参考-1-参考-2-阮一峰"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-守护进程-daemon【node-可用-pm2-框架】参考-1-参考-2-阮一峰"}},[e._v("#")]),e._v(" Linux 守护进程（daemon【node 可用 PM2 框架】"),t("a",{attrs:{href:"http://www.jb51.net/article/80184.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考 1"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考 2 阮一峰"),t("OutboundLink")],1)]),e._v(" "),t("blockquote",[t("p",[e._v("由来：\n启动一个基于 node 的简单 http 服务器")])]),e._v(" "),t("ul",[t("li",[e._v("脚本代码")])]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("//server.js\nvar http = require('http');\nhttp.createServer(function(req, res) {\n res.writeHead(200, {'Content-Type': 'text/plain'});\n res.end('Hello World');\n}).listen(5000);\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("h3",{attrs:{id:"前台任务-foreground-job-与后台任务-background-job"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前台任务-foreground-job-与后台任务-background-job"}},[e._v("#")]),e._v(" 前台任务（foreground job）与后台任务（background job）")]),e._v(" "),t("ul",[t("li",[e._v("执行以下命令启动脚本")])]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("node server.js\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("这样启动的脚本为 “前台任务”，独占命令窗口，运行完成或手动停止，才能执行其他命令。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("node server.js &\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v('这样启动的进程就会成为"后台任务"。如果要让正在运行的"前台任务"变为"后台任务"，可以先按 ctrl + z，然后执行 bg 命令（让最近一个暂停的"后台任务"继续执行）。')]),e._v(" "),t("blockquote",[t("p",[e._v("后台任务特点")])]),e._v(" "),t("ul",[t("li",[e._v("继承当前 session （对话）的标准输出（stdout）和标准错误（stderr）。因此，后台任务的所有输出依然会同步地在命令行下显示。")]),e._v(" "),t("li",[e._v("不再继承当前 session 的标准输入（stdin）。你无法向这个任务输入指令了。如果它试图读取标准输入，就会暂停执行（halt）。")])]),e._v(" "),t("h3",{attrs:{id:"sighup-信号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sighup-信号"}},[e._v("#")]),e._v(" SIGHUP 信号")]),e._v(" "),t("p",[e._v('变为"后台任务"后，一个进程是否就成为了守护进程呢？或者说，用户退出 session 以后，"后台任务"是否还会继续执行？\nLinux 系统是这样设计的：')]),e._v(" "),t("ol",[t("li",[e._v("用户准备退出 session")]),e._v(" "),t("li",[e._v("系统向该 session 发出 SIGHUP 信号")]),e._v(" "),t("li",[e._v("session 将 SIGHUP 信号发给所有子进程")]),e._v(" "),t("li",[e._v("子进程收到 SIGHUP 信号后，自动退出")])]),e._v(" "),t("p",[e._v('这就解释了为什么"前台任务"会随着 session 的退出而退出：因为它收到了 SIGHUP 信号。那么，"后台任务"是否也会收到 SIGHUP 信号？\n这由 Shell 的 huponexit 参数决定的。')]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("shopt | grep huponexit//查看huponexit参数的值。\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v('大多数 Linux 系统，这个参数默认关闭（off）。因此，session 退出的时候，不会把 SIGHUP 信号发给"后台任务"。所以，一般来说，"后台任务"不会随着 session 一起退出。')]),e._v(" "),t("h3",{attrs:{id:"disown-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disown-命令"}},[e._v("#")]),e._v(" disown 命令")]),e._v(" "),t("p",[e._v('通过"后台任务"启动"守护进程"并不保险，因为有的系统的 huponexit 参数可能是打开的（on）。\n更保险的方法是使用 disown 命令。它可以将指定任务从"后台任务"列表（jobs 命令的返回结果）之中移除。一个"后台任务"只要不在这个列表之中，session 就肯定不会向它发出 SIGHUP 信号。')]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("node server.js &\ndisown //移出最近一个正在执行的后台任务 [-r|-a|-h][自行查阅]\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h2",{attrs:{id:"ftp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ftp"}},[e._v("#")]),e._v(" FTP")]),e._v(" "),t("p",[t("a",{attrs:{href:"http://wingblog.top:92/",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考"),t("OutboundLink")],1),e._v("\nhttps://blog.csdn.net/hitabc141592/article/details/7573950")])])}),[],!1,null,null,null);s.default=n.exports}}]);